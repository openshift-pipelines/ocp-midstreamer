flowchart TD
    CONFIG["config/components.toml"] --> PARSE["Parse ComponentSpec[]"]
    PARSE --> CLONE["git clone --depth 1\n(with optional ref)"]
    CLONE --> BUILD["ko build / docker build\n(parallel via tokio)"]
    BUILD --> PUSH["Push to internal registry\nsvc:5000/tekton-upstream/*"]
    PUSH --> MAP["Lookup IMAGE_* env var\nmappings from config"]
    MAP --> PATCH["Patch operator CSV"]
    PATCH --> RECONCILE["OLM reconciles\nPods restart"]
    RECONCILE --> READY["TektonConfig Ready"]
    READY --> GAUGE["Run Gauge specs\n(streaming output)"]
    GAUGE --> PARSE_RESULTS["Parse JUnit XML\nor Gauge stdout fallback"]
    PARSE_RESULTS --> CATEGORIZE["Categorize failures\n(5 categories)"]
    CATEGORIZE --> RESULTS["results.json"]
    RESULTS --> PUBLISH["publish to gh-pages"]
    PUBLISH --> DASHBOARD["GitHub Pages Dashboard\ntrend charts + filters"]
